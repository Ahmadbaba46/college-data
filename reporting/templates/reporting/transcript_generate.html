{% extends 'portal/base.html' %}

{% block title %}Generate Transcript | Reporting{% endblock %}

{% block breadcrumb %}
<svg class="h-4 w-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
</svg>
<span class="text-slate-900 font-medium">Generate Transcript</span>
{% endblock %}

{% block body %}
<div class="space-y-8">
  <!-- Page Header -->
  <div class="rounded-2xl border border-green-200 bg-white p-8 shadow-xl">
    <div class="flex items-start justify-between">
      <div>
        <h1 class="text-3xl font-bold text-slate-900">
          Generate Student Transcript
        </h1>
        <p class="mt-2 text-slate-600 font-medium">Create official transcripts with security features</p>
      </div>
      <div class="hidden sm:flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-green-600 to-emerald-600 shadow-lg">
        <svg class="h-8 w-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
      </div>
    </div>
  </div>

  <!-- Generation Form -->
  <form method="post" class="rounded-2xl border border-slate-200/60 bg-white p-8 shadow-lg">
    {% csrf_token %}
    
    <div class="space-y-6">
      <!-- Student Selection -->
      <div>
        <label class="block text-sm font-bold text-slate-700 mb-2">Select Student *</label>
        <select 
          name="student_id" 
          required
          class="w-full rounded-xl border border-slate-300 px-4 py-3 text-slate-900 shadow-sm transition-all focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-500/20"
        >
          <option value="">Choose a student...</option>
          {% for student in students %}
          <option value="{{ student.student_id }}">
            {{ student.student_id }} - {{ student.full_name }} ({{ student.current_level.name|default:"No Level" }})
          </option>
          {% endfor %}
        </select>
      </div>

      <!-- Layout Selection -->
      <div x-data="{ selectedLayout: 'standard' }">
        <label class="block text-sm font-bold text-slate-700 mb-3">Transcript Layout *</label>
        <div class="grid gap-4 sm:grid-cols-2">
          <label class="relative flex cursor-pointer rounded-xl border-2 p-4 transition-all" :class="selectedLayout === 'standard' ? 'border-green-600 bg-green-50 ring-2 ring-green-500/20' : 'border-slate-200 hover:border-green-400'">
            <input type="radio" name="layout" value="standard" x-model="selectedLayout" class="sr-only" checked>
            <div class="flex-1">
              <div class="font-semibold" :class="selectedLayout === 'standard' ? 'text-green-700' : 'text-slate-800'">Standard</div>
              <div class="text-sm text-slate-600">Basic transcript with grades</div>
            </div>
            <svg x-show="selectedLayout === 'standard'" class="h-5 w-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </label>

          <label class="relative flex cursor-pointer rounded-xl border-2 p-4 transition-all" :class="selectedLayout === 'detailed' ? 'border-green-600 bg-green-50 ring-2 ring-green-500/20' : 'border-slate-200 hover:border-green-400'">
            <input type="radio" name="layout" value="detailed" x-model="selectedLayout" class="sr-only">
            <div class="flex-1">
              <div class="font-semibold" :class="selectedLayout === 'detailed' ? 'text-green-700' : 'text-slate-800'">Detailed</div>
              <div class="text-sm text-slate-600">Full academic record</div>
            </div>
            <svg x-show="selectedLayout === 'detailed'" class="h-5 w-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </label>

          <label class="relative flex cursor-pointer rounded-xl border-2 p-4 transition-all" :class="selectedLayout === 'official' ? 'border-green-600 bg-green-50 ring-2 ring-green-500/20' : 'border-slate-200 hover:border-green-400'">
            <input type="radio" name="layout" value="official" x-model="selectedLayout" class="sr-only">
            <div class="flex-1">
              <div class="font-semibold" :class="selectedLayout === 'official' ? 'text-green-700' : 'text-slate-800'">Official</div>
              <div class="text-sm text-slate-600">With signatures & seal</div>
            </div>
            <svg x-show="selectedLayout === 'official'" class="h-5 w-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </label>

          <label class="relative flex cursor-pointer rounded-xl border-2 p-4 transition-all" :class="selectedLayout === 'simple' ? 'border-green-600 bg-green-50 ring-2 ring-green-500/20' : 'border-slate-200 hover:border-green-400'">
            <input type="radio" name="layout" value="simple" x-model="selectedLayout" class="sr-only">
            <div class="flex-1">
              <div class="font-semibold" :class="selectedLayout === 'simple' ? 'text-green-700' : 'text-slate-800'">Simple</div>
              <div class="text-sm text-slate-600">Minimal design</div>
            </div>
            <svg x-show="selectedLayout === 'simple'" class="h-5 w-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          </label>
        </div>
      </div>

      <!-- Info Box -->
      <div class="rounded-xl bg-blue-50 border border-blue-200 p-4">
        <div class="flex gap-3">
          <svg class="h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <div class="text-sm text-blue-800">
            <p class="font-semibold mb-1">Security Features Included:</p>
            <ul class="list-disc list-inside space-y-1">
              <li>Unique verification code with QR code</li>
              <li>Digital signature and document hash</li>
              <li>Tamper-evident security features</li>
              <li>Stored in database for verification</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="mt-8 flex items-center gap-4">
      <button 
        type="submit"
        class="flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-green-500/30 transition-all hover:shadow-xl hover:scale-105 active:scale-95"
      >
        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        Generate & Download
      </button>
      
      <a 
        href="{% url 'reporting:transcript_batch' %}" 
        class="inline-flex items-center gap-2 rounded-xl border border-slate-300 bg-white px-6 py-3 text-sm font-semibold text-slate-700 shadow-sm transition-all hover:bg-slate-50 hover:shadow-md active:scale-95"
      >
        Batch Generate
      </a>
    </div>
  </form>

  <!-- Quick Actions -->
  <div class="grid gap-4 sm:grid-cols-3">
    <a href="{% url 'reporting:transcript_batch' %}" class="group rounded-xl border border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100 p-5 shadow-sm transition-all hover:shadow-lg hover:-translate-y-1 hover:border-purple-300">
      <div class="flex items-center gap-3">
        <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-white shadow-sm group-hover:shadow-md transition-shadow">
          <svg class="h-6 w-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
          </svg>
        </div>
        <div class="flex-1">
          <div class="text-base font-bold text-purple-900">Batch Generate</div>
          <div class="text-sm text-purple-700">Multiple students</div>
        </div>
      </div>
    </a>

    <a href="{% url 'reporting:transcript_history' %}" class="group rounded-xl border border-indigo-200 bg-gradient-to-br from-indigo-50 to-indigo-100 p-5 shadow-sm transition-all hover:shadow-lg hover:-translate-y-1 hover:border-indigo-300">
      <div class="flex items-center gap-3">
        <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-white shadow-sm group-hover:shadow-md transition-shadow">
          <svg class="h-6 w-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <div class="flex-1">
          <div class="text-base font-bold text-indigo-900">History</div>
          <div class="text-sm text-indigo-700">View past transcripts</div>
        </div>
      </div>
    </a>

    <a href="{% url 'reporting:verify_transcript' %}" class="group rounded-xl border border-green-200 bg-gradient-to-br from-green-50 to-green-100 p-5 shadow-sm transition-all hover:shadow-lg hover:-translate-y-1 hover:border-green-300">
      <div class="flex items-center gap-3">
        <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-white shadow-sm group-hover:shadow-md transition-shadow">
          <svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <div class="flex-1">
          <div class="text-base font-bold text-green-900">Verify</div>
          <div class="text-sm text-green-700">Check authenticity</div>
        </div>
      </div>
    </a>
  </div>
</div>
{% endblock %}
